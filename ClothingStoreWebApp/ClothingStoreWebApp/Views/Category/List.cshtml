@model IEnumerable<ClothingStoreWebApp.Models.Category>
@{
    ViewBag.Title = "Danh mục Sản phẩm";
    var brands = ViewBag.Brands as List<ClothingStoreWebApp.Models.Brand>;
}

<style>
    :root {
        --lv-brown: #5e3a1f;
        --lv-gold: #c9a961;
        --lv-black: #1a1a1a;
        --lv-cream: #f5f3f0;
        --lv-white: #ffffff;
    }

    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        background-color: var(--lv-white);
        color: var(--lv-black);
        letter-spacing: 0.02em;
    }

    /* Hero Section */
    .lv-hero {
        background-color: var(--lv-cream);
        padding: 60px 0 40px;
        text-align: center;
        border-bottom: 1px solid #e0ddd8;
        margin-bottom: 0;
    }

        .lv-hero h2 {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .lv-hero .hero-subtitle {
            font-size: 0.9rem;
            color: #666;
            letter-spacing: 0.05em;
            font-weight: 300;
        }

    /* Main Container */
    .lv-main-container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 60px 40px;
        display: flex;
        gap: 60px;
    }

    /* Sidebar */
    .lv-sidebar {
        width: 280px;
        flex-shrink: 0;
        position: sticky;
        top: 20px;
        height: fit-content;
    }

    .lv-sidebar-section {
        margin-bottom: 40px;
    }

    .lv-sidebar-header {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--lv-black);
        margin-bottom: 20px;
        font-weight: 500;
        padding-bottom: 15px;
        border-bottom: 1px solid #e0ddd8;
    }

        .lv-sidebar-header i {
            margin-right: 8px;
            font-size: 0.9rem;
        }

    .lv-category-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .lv-category-item {
        border-bottom: 1px solid #f0f0f0;
    }

    .lv-category-link {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px 0;
        text-decoration: none;
        color: var(--lv-black);
        font-size: 0.9rem;
        letter-spacing: 0.02em;
        transition: all 0.3s ease;
        font-weight: 400;
    }

        .lv-category-link:hover {
            color: var(--lv-gold);
            padding-left: 10px;
        }

        .lv-category-link img {
            width: 24px;
            height: 24px;
            object-fit: cover;
            margin-right: 10px;
            border-radius: 2px;
        }

        .lv-category-link i.fa-chevron-right {
            font-size: 0.7rem;
            color: #999;
            transition: transform 0.3s ease;
        }

        .lv-category-link:hover i.fa-chevron-right {
            transform: translateX(5px);
            color: var(--lv-gold);
        }

    /* Sub-categories */
    .lv-subcategory-list {
        list-style: none;
        padding: 0 0 10px 34px;
        margin: 0;
        background-color: #fafafa;
    }

    .lv-subcategory-item {
        border-bottom: 1px solid #f5f5f5;
    }

    .lv-subcategory-link {
        display: block;
        padding: 10px 0;
        text-decoration: none;
        color: #666;
        font-size: 0.85rem;
        letter-spacing: 0.02em;
        transition: all 0.3s ease;
    }

        .lv-subcategory-link:hover {
            color: var(--lv-gold);
            padding-left: 10px;
        }

        .lv-subcategory-link i {
            font-size: 0.7rem;
            margin-right: 8px;
        }

    /* Brand Grid */
    .lv-brand-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }

    .lv-brand-card {
        border: 1px solid #e0ddd8;
        padding: 20px;
        text-align: center;
        text-decoration: none;
        transition: all 0.3s ease;
        background-color: var(--lv-white);
        aspect-ratio: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

        .lv-brand-card:hover {
            border-color: var(--lv-black);
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .lv-brand-card img {
            max-height: 40px;
            max-width: 100%;
            object-fit: contain;
            margin-bottom: 10px;
            filter: grayscale(100%);
            transition: filter 0.3s ease;
        }

        .lv-brand-card:hover img {
            filter: grayscale(0%);
        }

    .lv-brand-placeholder {
        width: 40px;
        height: 40px;
        background-color: var(--lv-cream);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;
    }

    .lv-brand-name {
        font-size: 0.75rem;
        color: var(--lv-black);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-weight: 400;
    }

    /* Main Content */
    .lv-content {
        flex: 1;
    }

    .lv-content-header {
        margin-bottom: 50px;
    }

        .lv-content-header h2 {
            font-size: 1.5rem;
            font-weight: 300;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .lv-content-header p {
            font-size: 0.9rem;
            color: #666;
            letter-spacing: 0.02em;
        }

    /* Category Grid */
    .lv-category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 40px;
    }

    .lv-category-card {
        text-align: center;
        cursor: pointer;
        position: relative;
        text-decoration: none;
        display: block;
    }

    .lv-category-image-wrapper {
        position: relative;
        width: 100%;
        aspect-ratio: 3/4;
        overflow: hidden;
        background-color: var(--lv-cream);
        margin-bottom: 20px;
    }

    .lv-category-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .lv-category-card:hover .lv-category-image {
        transform: scale(1.05);
    }

    .lv-category-no-image {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--lv-cream);
    }

    .lv-category-card:hover .lv-category-no-image {
        background-color: #e9e7e3;
    }

    .lv-category-title {
        font-size: 1.1rem;
        color: var(--lv-black);
        margin-bottom: 10px;
        font-weight: 400;
        letter-spacing: 0.05em;
        text-transform: uppercase;
    }

    .lv-category-description {
        font-size: 0.85rem;
        color: #666;
        margin-bottom: 15px;
        line-height: 1.5;
    }

    .lv-category-badges {
        display: flex;
        gap: 8px;
        justify-content: center;
        flex-wrap: wrap;
    }

    .lv-badge {
        background-color: transparent;
        border: 1px solid var(--lv-black);
        color: var(--lv-black);
        padding: 4px 12px;
        font-size: 0.7rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-weight: 400;
    }

    .lv-badge-gold {
        border-color: var(--lv-gold);
        color: var(--lv-gold);
    }

    /* Empty State */
    .lv-empty-state {
        text-align: center;
        padding: 80px 20px;
        background-color: var(--lv-cream);
        border: 1px solid #e0ddd8;
    }

        .lv-empty-state i {
            font-size: 3rem;
            color: #999;
            margin-bottom: 20px;
        }

        .lv-empty-state p {
            font-size: 0.9rem;
            color: #666;
            letter-spacing: 0.05em;
        }

    /* Responsive without media queries */
    .lv-main-container {
        display: grid;
        grid-template-columns: minmax(280px, 280px) 1fr;
        gap: 60px;
    }

    .lv-sidebar {
        width: 100%;
    }

    .lv-hero h2 {
        font-size: clamp(1.8rem, 4vw, 2.5rem);
    }

    .lv-hero .hero-subtitle {
        font-size: clamp(0.8rem, 1.5vw, 0.9rem);
    }

    .lv-content-header h2 {
        font-size: clamp(1.2rem, 2.5vw, 1.5rem);
    }

    .lv-category-grid {
        grid-template-columns: repeat(auto-fill, minmax(min(280px, 100%), 1fr));
    }

    .lv-main-container {
        padding: clamp(40px, 5vw, 60px) clamp(20px, 3vw, 40px);
    }
</style>

<div class="lv-hero">
    <h2>
        <i class="fas fa-th-large"></i>
        Khám Phá Bộ Sưu Tập
    </h2>
    <p class="hero-subtitle">Tìm kiếm phong cách hoàn hảo cho bạn</p>
</div>

<div class="lv-main-container">
    @* Sidebar *@
    <aside class="lv-sidebar">
        @* Categories Section *@
        <div class="lv-sidebar-section">
            <h3 class="lv-sidebar-header">
                <i class="fas fa-th-large"></i>
                Danh Mục
            </h3>
            <ul class="lv-category-list">
                @if (Model != null && Model.Any())
                {
                    foreach (var category in Model.Where(c => c.ParentCategoryID == null))
                    {
                        <li class="lv-category-item">
                            <a href="@Url.Action("Index", "Product", new { categoryId = category.CategoryID })"
                               class="lv-category-link">
                                <span>
                                    @if (!string.IsNullOrEmpty(category.ImageURL))
                                    {
                                        <img src="@category.ImageURL" alt="@category.CategoryName">
                                    }
                                    @category.CategoryName
                                </span>
                                <i class="fas fa-chevron-right"></i>
                            </a>

                            @* Sub-categories *@
                            @if (category.SubCategories != null && category.SubCategories.Any(sc => sc.IsActive))
                            {
                                <ul class="lv-subcategory-list">
                                    @foreach (var subCat in category.SubCategories.Where(sc => sc.IsActive))
                                    {
                                        <li class="lv-subcategory-item">
                                            <a href="@Url.Action("Index", "Product", new { categoryId = subCat.CategoryID })"
                                               class="lv-subcategory-link">
                                                <i class="fas fa-angle-right"></i>
                                                @subCat.CategoryName
                                            </a>
                                        </li>
                                    }
                                </ul>
                            }
                        </li>
                    }
                }
            </ul>
        </div>

        @* Brands Section *@
        <div class="lv-sidebar-section">
            <h3 class="lv-sidebar-header">
                <i class="fas fa-tags"></i>
                Thương Hiệu
            </h3>
            <div class="lv-brand-grid">
                @if (brands != null && brands.Any())
                {
                    foreach (var brand in brands)
                    {
                        <a href="@Url.Action("Details", "Brand", new { id = brand.BrandID })"
                           class="lv-brand-card">
                            @if (!string.IsNullOrEmpty(brand.LogoURL))
                            {
                                <img src="@brand.LogoURL" alt="@brand.BrandName">
                            }
                            else
                            {
                                <div class="lv-brand-placeholder">
                                    <i class="fas fa-tag text-muted"></i>
                                </div>
                            }
                            <span class="lv-brand-name">@brand.BrandName</span>
                        </a>
                    }
                }
            </div>
        </div>
    </aside>

    @* Main Content *@
    <main class="lv-content">
        <div class="lv-content-header">
            <h2>
                <i class="fas fa-th-large"></i>
                Tất Cả Danh Mục
            </h2>
            <p>Khám phá các bộ sưu tập thời trang cao cấp của chúng tôi</p>
        </div>

        @* Category Cards Grid *@
        <div class="lv-category-grid">
            @if (Model != null && Model.Any())
            {
                foreach (var category in Model.Where(c => c.ParentCategoryID == null))
                {
                    <a href="@Url.Action("Index", "Product", new { categoryId = category.CategoryID })"
                       class="lv-category-card">
                        <div class="lv-category-image-wrapper">
                            @if (!string.IsNullOrEmpty(category.ImageURL))
                            {
                                <img src="@category.ImageURL" class="lv-category-image" alt="@category.CategoryName">
                            }
                            else
                            {
                                <div class="lv-category-no-image">
                                    <i class="fas fa-image fa-3x text-muted"></i>
                                </div>
                            }
                        </div>

                        <h3 class="lv-category-title">@category.CategoryName</h3>

                        @if (!string.IsNullOrEmpty(category.Description))
                        {
                            <p class="lv-category-description">
                                @(category.Description.Length > 60 ? category.Description.Substring(0, 60) + "..." : category.Description)
                            </p>
                        }

                        <div class="lv-category-badges">
                            @if (category.Products != null && category.Products.Any(p => p.IsActive))
                            {
                                <span class="lv-badge">
                                    @category.Products.Count(p => p.IsActive) sản phẩm
                                </span>
                            }

                            @if (category.SubCategories != null && category.SubCategories.Any(sc => sc.IsActive))
                            {
                                <span class="lv-badge lv-badge-gold">
                                    @category.SubCategories.Count(sc => sc.IsActive) danh mục con
                                </span>
                            }
                        </div>
                    </a>
                }
            }
            else
            {
                <div class="lv-empty-state" style="grid-column: 1 / -1;">
                    <i class="fas fa-info-circle"></i>
                    <p>Chưa có danh mục nào</p>
                </div>
            }
        </div>
    </main>
</div>

<script>
    // Add smooth scroll behavior
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });
</script>